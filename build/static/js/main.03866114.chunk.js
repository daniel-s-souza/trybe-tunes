(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{30:function(e,t,n){},32:function(e,t,n){},34:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(22),i=n.n(r),s=n(13),o=(n(30),n(3)),l=n(4),u=n(6),d=n(5),h=n(7),j=n(2),b=n.n(j),m=n(8),p=(n(32),n(0)),f=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return Object(p.jsx)("div",{class:"loader"})}}]),n}(a.Component),O=f,x=n(18),v="user",g=function(e){return localStorage.setItem(v,JSON.stringify(e))},k=function(e){return function(t){setTimeout((function(){t(e)}),1500)}},y=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem(v));null===t&&(t={}),k(t)(e)}))},N=function(e){return new Promise((function(t){g(Object(x.a)(Object(x.a)({},{name:"",email:"",image:"",description:""}),e)),k("OK")(t)}))},S=function(e){return new Promise((function(t){g(Object(x.a)({},e)),k("OK")(t)}))},C=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).getUser=Object(m.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,y();case 3:n=t.sent,e.setState({name:n.name,loading:!1});case 5:case"end":return t.stop()}}),t)}))),e.state={name:"",loading:!1},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getUser()}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.loading;return Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{className:"userName","data-testid":"header-user-name",children:t}),n&&Object(p.jsx)(O,{})]})}}]),n}(a.Component),w=(n(34),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)(C,{}),Object(p.jsx)("div",{className:"headerBar",children:Object(p.jsxs)("header",{"data-testid":"header-component",children:[Object(p.jsx)(s.b,{className:"searchLink",style:{textDecoration:"none",color:"white"},"data-testid":"link-to-search",to:"/search",children:"Search"}),Object(p.jsx)(s.b,{className:"profileLink",style:{textDecoration:"none",color:"white"},"data-testid":"link-to-profile",to:"/profile",children:"Perfil"})]})})]})}}]),n}(a.Component)),I=n(25),D="favorite_songs";JSON.parse(localStorage.getItem(D))||localStorage.setItem(D,JSON.stringify([]));var P=function(){return JSON.parse(localStorage.getItem(D))},U=function(e){return localStorage.setItem(D,JSON.stringify(e))},F=function(e){return function(t){setTimeout((function(){t(e)}),500)}},A=function(e){return new Promise((function(t){if(e){var n=P();U([].concat(Object(I.a)(n),[e]))}F("OK")(t)}))},L=function(e){return new Promise((function(t){var n=P();U(n.filter((function(t){return t.trackId!==e.trackId}))),F("OK")(t)}))},J=(n(43),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).handleFavoriteSong=Object(m.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==e.state.checked){t.next=7;break}return e.setState({loading:!0,checked:!0}),t.next=5,A(e.props);case 5:t.next=10;break;case 7:return e.setState({loading:!0,checked:!1}),t.next=10,L(e.props);case 10:e.setState({loading:!1});case 11:case"end":return t.stop()}}),t)}))),e.getFavoritSongs=Object(m.a)(b.a.mark((function t(){var n,a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(e){var t=P();F(t)(e)}));case 2:n=t.sent,e.setState({favorits:n}),a=e.state.favorits,c=e.props.trackId,a.some((function(e){return e.trackId===c}))&&e.setState({checked:!0});case 8:case"end":return t.stop()}}),t)}))),e.state={checked:!1,loading:!1,favorits:[]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getFavoritSongs()}},{key:"render",value:function(){var e=this.props,t=e.trackName,n=e.previewUrl,a=e.trackId,c=this.state,r=c.checked,i=c.loading;return Object(p.jsx)("section",{className:"card-section",children:Object(p.jsx)("section",{className:"card1",children:Object(p.jsxs)("div",{className:"card2",children:[Object(p.jsx)("h3",{className:"cardTitle",style:{textAlign:"center",color:"white"},children:t}),Object(p.jsxs)("audio",{className:"audio","data-testid":"audio-component",src:n,controls:!0,children:[Object(p.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento"," ",Object(p.jsx)("code",{children:"audio"}),"."]}),i?Object(p.jsx)(O,{}):Object(p.jsxs)("label",{className:"labelCard",style:{textAlign:"center",color:"white"},htmlFor:"checkboxLabel",children:["Favorita",Object(p.jsx)("input",{"data-testid":"checkbox-music-".concat(a),type:"checkbox",onChange:this.handleFavoriteSong,checked:r})]})]})})})}}]),n}(a.Component)),T=function(){var e=Object(m.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=T,M=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).handleApiRequest=Object(m.a)(b.a.mark((function t(){var n,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match.params.id,t.next=3,B(n);case 3:a=t.sent,e.setState({musicList:a,artist:a[0].artistName,album:a[0].collectionName});case 5:case"end":return t.stop()}}),t)}))),e.state={artist:"",album:"",musicList:[]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.handleApiRequest()}},{key:"render",value:function(){var e=this.state,t=e.musicList,n=e.artist,a=e.album;return Object(p.jsxs)("div",{"data-testid":"page-album",children:[Object(p.jsx)(w,{}),Object(p.jsxs)("section",{children:[Object(p.jsx)("h1",{style:{textAlign:"center",color:"white"},"data-testid":"artist-name",children:n}),Object(p.jsx)("h2",{style:{textAlign:"center",color:"white"},"data-testtestid":"album-name",children:a})]}),t.map((function(e,t){return Object(p.jsx)("div",{children:t>0&&Object(p.jsx)(J,{trackName:e.trackName,previewUrl:e.previewUrl,trackId:e.trackId})},e.trackId)}))]})}}]),n}(a.Component),R=n(14),K=(n(44),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).handleUserInfo=function(){e.setState({loading:!0},Object(m.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y();case 2:n=t.sent,e.setState({loading:!1,name:n.name,description:n.description,email:n.email,image:n.image});case 4:case"end":return t.stop()}}),t)}))))},e.handleChange=function(t){var n=t.target,a=n.value,c=n.name;e.setState(Object(R.a)({},c,a))},e.handleClick=function(t){t.preventDefault(),e.setState((function(){return{loading:!0}}),Object(m.a)(b.a.mark((function t(){var n,a,c,r,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,a=n.name,c=n.email,r=n.description,i=n.image,t.next=3,S({name:a,email:c,description:r,image:i});case 3:e.props.history.push("/profile");case 5:case"end":return t.stop()}}),t)}))))},e.state={loading:!1,name:"",description:"",email:"",image:""},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.handleUserInfo()}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.description,a=e.email,c=e.image;return Object(p.jsxs)("div",{"data-testid":"page-profile-edit",children:[Object(p.jsx)(w,{}),Object(p.jsxs)("section",{className:"editProfileSection",children:[Object(p.jsx)("input",{className:"Input",placeholder:"nome:",type:"text",name:"name",onChange:this.handleChange,"data-testid":"edit-input-name",value:t}),Object(p.jsx)("input",{className:"Input",placeholder:"email:",type:"text",name:"email",onChange:this.handleChange,"data-testid":"edit-input-email",value:a}),Object(p.jsx)("textarea",{className:"Input",placeholder:"description:",type:"tex",name:"description",onChange:this.handleChange,"data-testid":"edit-input-description",value:n}),Object(p.jsx)("input",{className:"Input",type:"text",name:"image",placeholder:"Foto",value:c,onChange:this.handleChange,"data-testid":"edit-input-image"}),Object(p.jsx)("button",{type:"submit",disabled:0===t.length||0===n.length||0===a.length||0===c.length,"data-testid":"edit-button-save",onClick:this.handleClick,children:"Salvar"})]})]})}}]),n}(a.Component)),E=n(15),q=(n(45),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={name:"",isDisabled:!0,loading:!1,redirect:!1},e.handleChange=e.handleChange.bind(Object(E.a)(e)),e.handleClick=e.handleClick.bind(Object(E.a)(e)),e}return Object(l.a)(n,[{key:"handleChange",value:function(e){var t=this,n=e.target,a=n.name,c="checkbox"===n.type?n.checked:n.value;this.setState(Object(R.a)({},a,c),(function(){t.validate()}))}},{key:"handleClick",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.name,this.setState({loading:!0}),e.next=4,N({name:t});case 4:this.setState({redirect:!0,loading:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validate",value:function(){this.state.name.length>=3?this.setState({isDisabled:!1}):this.setState({isDisabled:!0})}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.isDisabled,a=e.loading,c=e.redirect;return Object(p.jsxs)("main",{"data-testid":"page-login",children:[c&&Object(p.jsx)(h.a,{to:"/search"}),a?Object(p.jsx)(O,{}):Object(p.jsx)("form",{children:Object(p.jsxs)("div",{className:"formLogin",children:[Object(p.jsxs)("label",{className:"user-label",htmlFor:"name",children:[Object(p.jsx)("h1",{className:"title",children:"Trybe Tunes"}),Object(p.jsx)("input",{className:"loginInput",value:t,placeholder:"nome",name:"name",type:"text","data-testid":"login-name-input",onChange:this.handleChange})]}),Object(p.jsx)("button",{className:"loginBtn",type:"button","data-testid":"login-submit-button",disabled:n,onClick:this.handleClick,children:"Entrar"})]})})]})}}]),n}(a.Component)),W=q,_=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{"data-testid":"page-not-found",children:Object(p.jsx)("p",{children:"Not Found :/ "})})}}]),n}(a.Component),z=_,G=(n(46),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{className:"headerBar",children:Object(p.jsxs)("header",{"data-testid":"header-component",children:[Object(p.jsx)(s.b,{className:"searchLink",style:{textDecoration:"none",color:"white"},"data-testid":"link-to-search",to:"/search",children:"Search"}),Object(p.jsx)(s.b,{className:"profileLink",style:{textDecoration:"none",color:"white"},"data-testid":"link-to-profile",to:"/profile",children:"Perfil"})]})})}}]),n}(a.Component)),H=(n(47),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).componentDidMount=Object(m.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,y();case 3:n=t.sent,console.log(y()),e.setState({loading:!1,name:n.name,img:n.image,email:n.email,description:n.description});case 6:case"end":return t.stop()}}),t)}))),e.state={loading:!1,name:"",img:"",email:"",description:""},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.loading,n=e.name,a=e.img,c=e.email,r=e.description,i=this.props.history;return Object(p.jsxs)("div",{"data-testid":"page-profile",children:[Object(p.jsx)(G,{}),t?Object(p.jsx)(O,{}):Object(p.jsxs)("section",{className:"profile-section",children:[Object(p.jsx)("img",{src:a,alt:n,"data-testid":"profile-image"}),Object(p.jsx)("p",{children:n}),Object(p.jsx)("p",{children:c}),Object(p.jsx)("p",{children:r}),Object(p.jsx)("button",{onClick:function(){return i.push("/profile/edit")},children:"Editar perfil"})]})]})}}]),n}(a.Component)),Q=function(){var e=Object(m.a)(b.a.mark((function e(t){var n,a,c,r,i,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURI(t).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),e.next=4,fetch(a);case 4:return c=e.sent,e.next=7,c.json();case 7:return r=e.sent,i=r.results,s=i.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=Q,X=(n(48),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).handleFrase=function(){var t=e.state,n=t.albums,a=t.artista;n.length>0&&e.setState({frase:"Resultado de \xe1lbuns de: ".concat(a)}),0===a.length&&e.setState({frase:""}),0===n.length&&e.setState({frase:"Nenhum \xe1lbum foi encontrado"})},e.state={name:"",artista:"",isDisabled:!0,loading:!1,albums:[],frase:""},e.handleChange=e.handleChange.bind(Object(E.a)(e)),e.handleSearch=e.handleSearch.bind(Object(E.a)(e)),e}return Object(l.a)(n,[{key:"handleChange",value:function(e){var t=this,n=e.target,a=n.name,c="checkbox"===n.type?n.checked:n.value;this.setState(Object(R.a)({},a,c),(function(){t.validate()}))}},{key:"handleSearch",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t,n,a=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.name,this.setState({loading:!0}),e.next=4,V(t);case 4:n=e.sent,this.setState({loading:!1,albums:n},(function(){return a.setState({artista:t,name:""})})),this.handleFrase();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validate",value:function(){this.state.name.length>=2?this.setState({isDisabled:!1}):this.setState({isDisabled:!0})}},{key:"render",value:function(){var e=this.state,t=e.isDisabled,n=e.name,a=e.loading,c=e.albums,r=e.frase;return Object(p.jsxs)("div",{"data-testid":"page-search",children:[Object(p.jsx)(w,{}),a?Object(p.jsx)(O,{}):Object(p.jsxs)("form",{className:"search-form",children:[Object(p.jsx)("input",{className:"searchBar",name:"name","data-testid":"search-artist-input",value:n,type:"text",placeholder:"Nome do Artista",onChange:this.handleChange}),Object(p.jsx)("button",{className:"searchBtn","data-testid":"search-artist-button",disabled:t,type:"button",onClick:this.handleSearch,children:"Procurar"})]}),Object(p.jsx)("div",{className:"fraseResult",children:r}),c.length>0&&c.map((function(e){return Object(p.jsx)("div",{className:"totalCard",children:Object(p.jsxs)("div",{className:"card",children:[Object(p.jsx)("img",{src:e.artworkUrl100,alt:"albumImage"}),Object(p.jsxs)("div",{className:"cardText",children:[Object(p.jsx)(s.b,{to:"/album/".concat(e.collectionId),"data-testid":"link-to-album-".concat(e.collectionId),style:{textDecoration:"none",color:"white"},children:e.collectionName}),Object(p.jsx)("span",{style:{color:"white"},children:e.artistName})]})]},e.collectionId)})}))]})}}]),n}(a.Component)),Y=X,Z=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(p.jsxs)(h.d,{children:[Object(p.jsx)(h.b,{exact:!0,path:"/",component:W}),Object(p.jsx)(h.b,{exact:!0,path:"/search",component:Y}),Object(p.jsx)(h.b,{exact:!0,path:"/album/:id",component:M}),Object(p.jsx)(h.b,{exact:!0,path:"/profile",component:H}),Object(p.jsx)(h.b,{exact:!0,path:"/profile/edit",component:K}),Object(p.jsx)(h.b,{exact:!0,path:"/*",component:z})]})}}]),n}(a.Component),$=Z,ee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(p.jsx)($,{})}}]),n}(c.a.Component),te=ee;i.a.render(Object(p.jsx)(s.a,{children:Object(p.jsx)(te,{})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.03866114.chunk.js.map